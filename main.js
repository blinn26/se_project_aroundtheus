!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.remove(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.add(this._errorClass)}_hasInvalidInput(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(){this._isFormValid()?(this._submitButtonEl.classList.remove(this._inactiveButtonClass),this._submitButtonEl.disabled=!1):(this._submitButtonEl.classList.add(this._inactiveButtonClass),this._submitButtonEl.disabled=!0)}_isFormValid(){return this._inputEls.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButtonEl=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._hasInvalidInput(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState()}};const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__button-disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error-hidden",profileNameSelector:".profile__title",profileDescriptionSelector:".profile__description"};function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=class{constructor(e){this._popupElement=document.querySelector(e),this._handleEscUp=this._handleEscUp.bind(this)}_handleEscUp(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close-button"))&&this.close()}))}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscUp)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscUp)}},o=class extends i{constructor(e){let{popupSelector:t,handleFormSubmit:r}=e;super(t),this._modalForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=r}_getInputValues(){const e=this._modalForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}close(){this._modalForm.reset(),super.close()}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}};document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list");const n=document.querySelector("#edit-modal"),s=document.querySelector("#add-modal"),l=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),c=(n.querySelector(".modal__close-button"),s.querySelector(".modal__close-button"),s.querySelector(t.submitButtonSelector),document.querySelector(".modal")),d=c.querySelector(".modal__form"),u=(c.querySelector("#modal__form-title"),c.querySelector("#modal__form-link"),document.getElementById("preview-modal"),document.querySelector(".modal__text "),document.querySelector(".profile__title "),document.querySelector(".profile__description"),d.querySelector(".modal__input-line")),_=d.querySelector(".modal__input-description"),m=new class{constructor(e){let{profileNameSelector:t,profileDescriptionSelector:r}=e;this._profileNameElement=document.querySelector(t),this._profileDescriptionElement=document.querySelector(r)}setProfileInfo(e,t){this._profileNameElement.textContent=e,this._profileDescriptionElement.textContent=t}getProfileInfo(){return{name:this._profileNameElement.textContent,description:this._profileDescriptionElement.textContent}}}({profileNameSelector:t.profileNameSelector,profileDescriptionSelector:t.profileDescriptionSelector}),p=new e(t,d),h=new e(t,s);p.enableValidation(),h.enableValidation();const S=new class extends i{constructor(e){super(e),this._imageModalPreview=this._popupElement.querySelector(".modal__image"),this._textTitlePreview=this._popupElement.querySelector(".modal__text")}open(e){let{link:t,name:r}=e;this._imageModalPreview.src=t,this._imageModalPreview.alt=r,this._textTitlePreview.textContent=r,super.open()}}("#preview-modal");S.setEventListeners();const v=new o({popupSelector:"#add-modal",handleFormSubmit:e=>{const t=y(e);f.addItem(t),v.close()}});v.setEventListeners();const E=new o({popupSelector:"#edit-modal",handleFormSubmit:e=>{m.setProfileInfo(e.name,e.description)}});function y(e){return new class{constructor(e,t){let{data:i,handCardClick:o}=e;r(this,"_handleLikeIcon",(()=>{this._element.querySelector(".card__like-button").classList.toggle("card__like-button_is-active")})),r(this,"_handleDeleteCard",(()=>{this._element.remove()})),this._name=i.name,this._link=i.link,this._cardSelector=t,this._handleCardClick=o}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",this._handleLikeIcon),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})})),this._element.querySelector(".card__trash-button").addEventListener("click",this._handleDeleteCard)}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__description-list").textContent=this._name,this._element.querySelector(".card__image").alt=this._name,this._setEventListeners(),this._element}}({data:e,handCardClick:e=>{S.open(e)}},"#card-template").getView()}E.setEventListeners(),l.addEventListener("click",(()=>{const e=m.getProfileInfo();u.value=e.name,_.value=e.description,E.open()}));const f=new class{constructor(e,t){let{items:r,renderer:i}=e;this._renderer=i,this._items=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=y(e);f.addItem(t)}},".cards__list");f.renderItems(),a.addEventListener("click",(()=>{h.resetValidation(),v.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBaUIsU0FBUyxLQUM1Q29ELEVBQWlCaEQsa0JBRWpCdUQsRUFBYXhDLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09OU1RSVUNUT1IgQU5EIENMQVNTRVMgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3NcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRVJST1JTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKVxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2VcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcylcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKVxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9ICcnXG4gICAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDSEVDSyBWQUxJREFUWSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbClcbiAgICB9XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQlVUVE9OIENMQVNTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faXNGb3JtVmFsaWQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbC5kaXNhYmxlZCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBfaXNGb3JtVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiB7XG4gICAgICByZXR1cm4gaW5wdXRFbC52YWxpZGl0eS52YWxpZFxuICAgIH0pXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU0VUIEVWRU5UTElTVEVORVJTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0RWwpXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVOQUJMRSBWQUxJREFUSU9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKClcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvclxuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgIElOVElBTCBDQVJEUyBESVNQTEFZICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ1lvc2VtaXRlIFZhbGxleScsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGFrZSBMb3Vpc2UnLFxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0JhbGQgTW91bnRhaW5zJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMYXRlbWFyJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ1Zhbm9pc2UgTmF0aW9uYWwgUGFyaycsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMYWdvIGRpIEJyYWllcycsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnJyxcbiAgfSxcbl1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICBFWFBPUlRJTkcgU0VMRUNUT1JTLCBCVVRUT05TLCBDTEFTU0VTLCBDQVJEUyBBTkQgRk9STVMgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcubW9kYWxfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLm1vZGFsX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLm1vZGFsX19zYXZlLWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdtb2RhbF9fYnV0dG9uLWRpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnbW9kYWxfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAnbW9kYWxfX2Vycm9yLWhpZGRlbicsXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fdGl0bGUnLFxuICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGNhcmRTZWN0aW9uOiAnLmNhcmRzX19saXN0JyxcbiAgY2FyZFRlbXBsYXRlOiAnI2NhcmQtdGVtcGxhdGUnLFxuICBjYXJkTW9kYWxBZGQ6ICdhZGRfX21vZGFsJyxcbn1cbiIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05TVFJVQ1RPUiBGT1IgQ0FSRFMgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZENhcmRDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGlua1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRDYXJkQ2xpY2tcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRVQgRVZFTlRMSVNURU5FUlMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTGlrZUljb24pXG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idXR0b24nKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZClcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICAgICAgICAgICAgICAgICAgICAgICAgICAgSEFORExFIEFORCBHRVQgVEVNUExBVEUgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyogICBfcHJldmlld01vZGFsSW1hZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgaW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmV2aWV3LW1vZGFsJylcbiAgICBjb25zdCBpbWFnZU1vZGFsSW1hZ2UgPSBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW1hZ2UnKVxuICAgIGltYWdlTW9kYWxJbWFnZS5zcmMgPSB0aGlzLl9saW5rXG4gICAgaW1hZ2VNb2RhbEltYWdlLmFsdCA9IHRoaXMuX25hbWVcbiAgICBjb25zdCBpbWFnZVByZXZpZXcgPSBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGV4dCcpXG4gICAgaW1hZ2VQcmV2aWV3LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZVxuXG4gICAgb3Blbk1vZGFsKGltYWdlTW9kYWwpXG4gIH0gKi9cblxuICBfaGFuZGxlTGlrZUljb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlJylcbiAgICAvLyBsaWtlIGljb24gYWN0aXZlXG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gICAgLy8gZGVsZXRlIGNhcmRcbiAgfVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSlcbiAgICByZXR1cm4gY2FyZEVsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFVFVSTiBDQVJEUyBBTkQgRVhQT1JUICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKClcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuc3JjID0gdGhpcy5fbGlua1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2Rlc2NyaXB0aW9uLWxpc3QnKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9uYW1lXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKS5hbHQgPSB0aGlzLl9uYW1lXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQ2FyZFxuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKVxuICAgIHRoaXMuX2hhbmRsZUVzY1VwID0gdGhpcy5faGFuZGxlRXNjVXAuYmluZCh0aGlzKVxuICB9XG5cbiAgX2hhbmRsZUVzY1VwKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogICAgICAgICAgICAgIEVWRU5UIExJU1RFTkVSUyBGT1IgT1BFTiBBTkQgQ0xPU0UgQ0xJQ0sgQU5EIEVTQyAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwnKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2Nsb3NlLWJ1dHRvbicpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsX29wZW5lZCcpXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NVcClcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9vcGVuZWQnKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjVXApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG5cbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJylcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdFxuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dHMgPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19pbnB1dCcpXG5cbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge31cblxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlXG4gICAgfSlcblxuICAgIHJldHVybiBmb3JtVmFsdWVzXG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KClcblxuICAgIHN1cGVyLmNsb3NlKClcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfSlcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybVxuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgIElNUE9SVElORyBGT1JNVkFMSURBVE9SIEFORCBDQVJEUyBUTyBTQ1JJUFRTIEZPUiBKUyAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuaW1wb3J0ICcuL2luZGV4LmNzcydcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcydcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJ1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWcsIHNlbGVjdG9ycyB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcydcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcydcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcydcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJ1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FSRFMgQ09NTUFORFMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLXRlbXBsYXRlJykuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZFxuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fbGlzdCcpXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgUFJPRklMRSBCVVRUT05TIFBST0ZJTEUgRk9STVMgTU9EQUwgQlVUVE9OUyBNT0RBTCBGT1JNUyAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0LW1vZGFsJylcbmNvbnN0IGNhcmRBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtbW9kYWwnKVxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKVxuY29uc3QgY2FyZE1vZGFsT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJylcbmNvbnN0IHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICAnLm1vZGFsX19jbG9zZS1idXR0b24nXG4pXG5jb25zdCBhZGRNb2RhbENsb3NlQnV0dG9uID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UtYnV0dG9uJylcbmNvbnN0IGFkZENhcmRTYXZlID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKVxuY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJylcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKVxuY29uc3QgbW9kYWxUaXRsZUZvcm0gPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcignI21vZGFsX19mb3JtLXRpdGxlJylcbmNvbnN0IG1vZGFsTGlua0Zvcm0gPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcignI21vZGFsX19mb3JtLWxpbmsnKVxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctbW9kYWwnKVxuY29uc3QgcHJldmlld1RleHRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGV4dCAnKVxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlICcpXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKVxuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IHByb2ZpbGVFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0LWxpbmUnKVxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBwcm9maWxlRWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgJy5tb2RhbF9faW5wdXQtZGVzY3JpcHRpb24nXG4pXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICBQUk9GSUxFU0VMRUNUT1IgQU5EIFBST0ZJTEVERVNDUklQVElPTiBNT0RBTCBTRUxFQ1RPUiAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogY29uZmlnLnByb2ZpbGVOYW1lU2VsZWN0b3IsXG4gIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yOiBjb25maWcucHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsXG59KVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICBFTkFCTEUgRk9STVZBTElEQVRJT04gRlJPTSBGT1JNVkFMSURBVE9SICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pXG5cbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRBZGRNb2RhbClcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbmFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgQk9USCBQT1BVUCBNT0RBTFMgQU5EIFBSRVZJRVdTICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgYWRkUG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNwcmV2aWV3LW1vZGFsJylcbmFkZFBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKClcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJyNhZGQtbW9kYWwnLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpXG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKVxuICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpXG4gIH0sXG59KVxuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnI2VkaXQtbW9kYWwnLFxuXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0UHJvZmlsZUluZm8oZGF0YS5uYW1lLCBkYXRhLmRlc2NyaXB0aW9uKVxuICB9LFxufSlcbnVzZXJJbmZvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VySW5mby5nZXRQcm9maWxlSW5mbygpXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5uYW1lXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZUluZm8uZGVzY3JpcHRpb25cblxuICB1c2VySW5mb1BvcHVwLm9wZW4oKVxufSlcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgIENSRUFURSBDQVJEIEZVTkNUSU9OICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGE6IGl0ZW0sXG4gICAgICBoYW5kQ2FyZENsaWNrOiAoZGF0YSkgPT4ge1xuICAgICAgICBhZGRQb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZVxuICApXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKVxufVxuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpXG5cbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZClcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cbilcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCkgLy9UaGlzIGlzIHdoYXQgcmVuZGVycyB0aGUgY2FyZHNcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICBDQVJEIE1PREFMIFRJVExFIEFORCBMSU5LIEFORCBQUk9GSUxFIE9QRU4gQU5EIENMT1NFIEJVVFRPTlMgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBoYW5kbGVBZGRDYXJkID0gKGV2dCkgPT4ge1xuICBldnQucHJldmVudERlZmF1bHQoKVxuICBjb25zdCBuYW1lID0gZXZ0LnRhcmdldC50aXRsZS52YWx1ZVxuICBjb25zdCBsaW5rID0gZXZ0LnRhcmdldC5saW5rLnZhbHVlXG5cbiAgY2xvc2VNb2RhbChjYXJkQWRkTW9kYWwpXG59XG5cbmNhcmRNb2RhbE9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGFkZENhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKClcblxuICBhZGRDYXJkUG9wdXAub3BlbigpXG59KVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvclxuICAgIClcbiAgfVxuXG4gIHNldFByb2ZpbGVJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZVxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvblxuICB9XG5cbiAgZ2V0UHJvZmlsZUluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgdGhpcy5faW1hZ2VNb2RhbFByZXZpZXcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpXG4gICAgdGhpcy5fdGV4dFRpdGxlUHJldmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3RleHQnKVxuICB9XG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcbiAgICB0aGlzLl9pbWFnZU1vZGFsUHJldmlldy5zcmMgPSBsaW5rXG4gICAgdGhpcy5faW1hZ2VNb2RhbFByZXZpZXcuYWx0ID0gbmFtZVxuICAgIHRoaXMuX3RleHRUaXRsZVByZXZpZXcudGV4dENvbnRlbnQgPSBuYW1lXG4gICAgc3VwZXIub3BlbigpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2VcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3RvcilcbiAgfVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKVxuICAgIH0pXG4gIH1cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvckVsIiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lzRm9ybVZhbGlkIiwiX3N1Ym1pdEJ1dHRvbkVsIiwiZGlzYWJsZWQiLCJfaW5wdXRFbHMiLCJldmVyeSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwia2V5IiwiY2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9tb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwicHJvZmlsZUVkaXRNb2RhbCIsImNhcmRBZGRNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiY2FyZE1vZGFsT3BlbkJ1dHRvbiIsInByb2ZpbGVNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVOYW1lSW5wdXQiLCJnZXRFbGVtZW50QnlJZCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwidXNlckluZm8iLCJfcHJvZmlsZU5hbWVFbGVtZW50IiwiX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJzZXRQcm9maWxlSW5mbyIsImRlc2NyaXB0aW9uIiwiZ2V0UHJvZmlsZUluZm8iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkVmFsaWRhdG9yIiwiYWRkUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VNb2RhbFByZXZpZXciLCJfdGV4dFRpdGxlUHJldmlldyIsImxpbmsiLCJzcmMiLCJhbHQiLCJhZGRDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZGF0YSIsImNhcmQiLCJjcmVhdGVDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwidXNlckluZm9Qb3B1cCIsIml0ZW0iLCJjYXJkU2VsZWN0b3IiLCJoYW5kQ2FyZENsaWNrIiwiX2VsZW1lbnQiLCJ0b2dnbGUiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9nZXRUZW1wbGF0ZSIsImNsb25lTm9kZSIsImdldFZpZXciLCJwcm9maWxlSW5mbyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9pdGVtcyIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==